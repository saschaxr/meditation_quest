import{aD as w,b as Je,k as Be,r as K,c as m,l as te,W as Qe,h as E,p as _e,T as fe,o as he,g as Pe,s as Le,aE as Oe,aF as ge,aG as C,aH as Xe,a0 as me,aI as Ye,z as Ue,A as Ze,au as et,av as ye,S as tt,B as re,C as ot,D as nt,K as we,U as it,V as lt,G as st}from"./index.74690dbb.js";import{x as at,y as Re,c as rt,e as Ae,z as pe,B as ut,C as ct,D as Fe,d as dt,a as He,b as De,f as Ke,E as ft,F as mt,G as Me,H as $e,I as be,J as vt,K as ht,L as Se,M as gt,w as ze,N as yt,O as wt,P as pt,R as bt,g as St}from"./audioIO.a15ebf0f.js";import{_ as xt}from"./plugin-vue_export-helper.21dcd24c.js";const q=[];let L;function Ct(e){L=e.keyCode===27}function Tt(){L===!0&&(L=!1)}function Et(e){L===!0&&(L=!1,Je(e,27)===!0&&q[q.length-1](e))}function We(e){window[e]("keydown",Ct),window[e]("blur",Tt),window[e]("keyup",Et),L=!1}function Ie(e){w.is.desktop===!0&&(q.push(e),q.length===1&&We("addEventListener"))}function oe(e){const t=q.indexOf(e);t!==-1&&(q.splice(t,1),q.length===0&&We("removeEventListener"))}const k=[];function Ve(e){k[k.length-1](e)}function je(e){w.is.desktop===!0&&(k.push(e),k.length===1&&document.body.addEventListener("focusin",Ve))}function ve(e){const t=k.indexOf(e);t!==-1&&(k.splice(t,1),k.length===0&&document.body.removeEventListener("focusin",Ve))}var Dt=Be({name:"QMenu",inheritAttrs:!1,props:{...at,...Re,...rt,...Ae,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:pe},self:{type:String,validator:pe},offset:{type:Array,validator:ut},scrollTarget:ct,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Fe,"click","escapeKey"],setup(e,{slots:t,emit:o,attrs:i}){let a=null,u,s,c;const d=Pe(),{proxy:v}=d,{$q:f}=v,h=K(null),g=K(!1),M=m(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),$=dt(e,f),{registerTick:ne,removeTick:z}=He(),{registerTimeout:W}=De(),{transitionProps:I,transitionStyle:ie}=Ke(e),{localScrollTarget:O,changeScrollEvent:V,unconfigureScrollTarget:le}=ft(e,Y),{anchorEl:p,canShow:B}=mt({showing:g}),{hide:j}=Me({showing:g,canShow:B,handleShow:Q,handleHide:A,hideOnRouteChange:M,processOnMount:!0}),{showPortal:N,hidePortal:G,renderPortal:_}=$e(d,h,y,"menu"),R={anchorEl:p,innerRef:h,onClickOutside(n){if(e.persistent!==!0&&g.value===!0)return j(n),(n.type==="touchstart"||n.target.classList.contains("q-dialog__backdrop"))&&Le(n),!0}},J=m(()=>Se(e.anchor||(e.cover===!0?"center middle":"bottom start"),f.lang.rtl)),se=m(()=>e.cover===!0?J.value:Se(e.self||"top start",f.lang.rtl)),ae=m(()=>(e.square===!0?" q-menu--square":"")+($.value===!0?" q-menu--dark q-dark":"")),b=m(()=>e.autoClose===!0?{onClick:F}:{}),P=m(()=>g.value===!0&&e.persistent!==!0);te(P,n=>{n===!0?(Ie(l),gt(R)):(oe(l),be(R))});function S(){ze(()=>{let n=h.value;n&&n.contains(document.activeElement)!==!0&&(n=n.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.querySelector("[autofocus], [data-autofocus]")||n,n.focus({preventScroll:!0}))})}function Q(n){if(a=e.noRefocus===!1?document.activeElement:null,je(U),N(),Y(),u=void 0,n!==void 0&&(e.touchPosition||e.contextMenu)){const x=Qe(n);if(x.left!==void 0){const{top:Ne,left:Ge}=p.value.getBoundingClientRect();u={left:x.left-Ge,top:x.top-Ne}}}s===void 0&&(s=te(()=>f.screen.width+"|"+f.screen.height+"|"+e.self+"|"+e.anchor+"|"+f.lang.rtl,r)),e.noFocus!==!0&&document.activeElement.blur(),ne(()=>{r(),e.noFocus!==!0&&S()}),W(()=>{f.platform.is.ios===!0&&(c=e.autoClose,h.value.click()),r(),N(!0),o("show",n)},e.transitionDuration)}function A(n){z(),G(),X(!0),a!==null&&(n===void 0||n.qClickOutside!==!0)&&(((n&&n.type.indexOf("key")===0?a.closest('[tabindex]:not([tabindex^="-"])'):void 0)||a).focus(),a=null),W(()=>{G(!0),o("hide",n)},e.transitionDuration)}function X(n){u=void 0,s!==void 0&&(s(),s=void 0),(n===!0||g.value===!0)&&(ve(U),le(),be(R),oe(l)),n!==!0&&(a=null)}function Y(){(p.value!==null||e.scrollTarget!==void 0)&&(O.value=vt(p.value,e.scrollTarget),V(O.value,r))}function F(n){c!==!0?(yt(v,n),o("click",n)):c=!1}function U(n){P.value===!0&&e.noFocus!==!0&&Oe(h.value,n.target)!==!0&&S()}function l(n){o("escapeKey"),j(n)}function r(){ht({targetEl:h.value,offset:e.offset,anchorEl:p.value,anchorOrigin:J.value,selfOrigin:se.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function y(){return E(fe,I.value,()=>g.value===!0?E("div",{role:"menu",...i,ref:h,tabindex:-1,class:["q-menu q-position-engine scroll"+ae.value,i.class],style:[i.style,ie.value],...b.value},_e(t.default)):null)}return he(X),Object.assign(v,{focus:S,updatePosition:r}),_}});function qt(e,t,o){let i;function a(){i!==void 0&&(ge.remove(i),i=void 0)}return he(()=>{e.value===!0&&a()}),{removeFromHistory:a,addToHistory(){i={condition:()=>o.value===!0,handler:t},ge.add(i)}}}let H=0,ue,ce,D,de=!1,xe,Ce,Te,T=null;function kt(e){Bt(e)&&Le(e)}function Bt(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=Xe(e),o=e.shiftKey&&!e.deltaX,i=!o&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),a=o||i?e.deltaY:e.deltaX;for(let u=0;u<t.length;u++){const s=t[u];if(bt(s,i))return i?a<0&&s.scrollTop===0?!0:a>0&&s.scrollTop+s.clientHeight===s.scrollHeight:a<0&&s.scrollLeft===0?!0:a>0&&s.scrollLeft+s.clientWidth===s.scrollWidth}return!0}function Ee(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Z(e){de!==!0&&(de=!0,requestAnimationFrame(()=>{de=!1;const{height:t}=e.target,{clientHeight:o,scrollTop:i}=document.scrollingElement;(D===void 0||t!==window.innerHeight)&&(D=o-t,document.scrollingElement.scrollTop=i),i>D&&(document.scrollingElement.scrollTop-=Math.ceil((i-D)/8))}))}function qe(e){const t=document.body,o=window.visualViewport!==void 0;if(e==="add"){const{overflowY:i,overflowX:a}=window.getComputedStyle(t);ue=wt(window),ce=pt(window),xe=t.style.left,Ce=t.style.top,Te=window.location.href,t.style.left=`-${ue}px`,t.style.top=`-${ce}px`,a!=="hidden"&&(a==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),i!=="hidden"&&(i==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,w.is.ios===!0&&(o===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Z,C.passiveCapture),window.visualViewport.addEventListener("scroll",Z,C.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Ee,C.passiveCapture))}w.is.desktop===!0&&w.is.mac===!0&&window[`${e}EventListener`]("wheel",kt,C.notPassive),e==="remove"&&(w.is.ios===!0&&(o===!0?(window.visualViewport.removeEventListener("resize",Z,C.passiveCapture),window.visualViewport.removeEventListener("scroll",Z,C.passiveCapture)):window.removeEventListener("scroll",Ee,C.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=xe,t.style.top=Ce,window.location.href===Te&&window.scrollTo(ue,ce),D=void 0)}function _t(e){let t="add";if(e===!0){if(H++,T!==null){clearTimeout(T),T=null;return}if(H>1)return}else{if(H===0||(H--,H>0))return;if(t="remove",w.is.ios===!0&&w.is.nativeMobile===!0){T!==null&&clearTimeout(T),T=setTimeout(()=>{qe(t),T=null},100);return}}qe(t)}function Pt(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,_t(t))}}}let ee=0;const Lt={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},ke={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Kt=Be({name:"QDialog",inheritAttrs:!1,props:{...Re,...Ae,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:e=>["standard","top","bottom","left","right"].includes(e)}},emits:[...Fe,"shake","click","escapeKey"],setup(e,{slots:t,emit:o,attrs:i}){const a=Pe(),u=K(null),s=K(!1),c=K(!1);let d=null,v=null,f,h;const g=m(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:M}=Pt(),{registerTimeout:$}=De(),{registerTick:ne,removeTick:z}=He(),{transitionProps:W,transitionStyle:I}=Ke(e,()=>ke[e.position][0],()=>ke[e.position][1]),ie=m(()=>I.value+(e.backdropFilter!==void 0?`;backdrop-filter:${e.backdropFilter};-webkit-backdrop-filter:${e.backdropFilter}`:"")),{showPortal:O,hidePortal:V,portalIsAccessible:le,renderPortal:p}=$e(a,u,U,"dialog"),{hide:B}=Me({showing:s,hideOnRouteChange:g,handleShow:se,handleHide:ae,processOnMount:!0}),{addToHistory:j,removeFromHistory:N}=qt(s,B,g),G=m(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Lt[e.position]}`+(c.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),_=m(()=>s.value===!0&&e.seamless!==!0),R=m(()=>e.autoClose===!0?{onClick:X}:{}),J=m(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${_.value===!0?"modal":"seamless"}`,i.class]);te(()=>e.maximized,l=>{s.value===!0&&A(l)}),te(_,l=>{M(l),l===!0?(je(F),Ie(S)):(ve(F),oe(S))});function se(l){j(),v=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,A(e.maximized),O(),c.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),ne(b)):z(),$(()=>{if(a.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:r,bottom:y}=document.activeElement.getBoundingClientRect(),{innerHeight:n}=window,x=window.visualViewport!==void 0?window.visualViewport.height:n;r>0&&y>x/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-x,y>=n?1/0:Math.ceil(document.scrollingElement.scrollTop+y-x/2))),document.activeElement.scrollIntoView()}h=!0,u.value.click(),h=!1}O(!0),c.value=!1,o("show",l)},e.transitionDuration)}function ae(l){z(),N(),Q(!0),c.value=!0,V(),v!==null&&(((l&&l.type.indexOf("key")===0?v.closest('[tabindex]:not([tabindex^="-"])'):void 0)||v).focus(),v=null),$(()=>{V(!0),c.value=!1,o("hide",l)},e.transitionDuration)}function b(l){ze(()=>{let r=u.value;if(r!==null){if(l!==void 0){const y=r.querySelector(l);if(y!==null){y.focus({preventScroll:!0});return}}r.contains(document.activeElement)!==!0&&(r=r.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||r.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||r.querySelector("[autofocus], [data-autofocus]")||r,r.focus({preventScroll:!0}))}})}function P(l){l&&typeof l.focus=="function"?l.focus({preventScroll:!0}):b(),o("shake");const r=u.value;r!==null&&(r.classList.remove("q-animate--scale"),r.classList.add("q-animate--scale"),d!==null&&clearTimeout(d),d=setTimeout(()=>{d=null,u.value!==null&&(r.classList.remove("q-animate--scale"),b())},170))}function S(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&P():(o("escapeKey"),B()))}function Q(l){d!==null&&(clearTimeout(d),d=null),(l===!0||s.value===!0)&&(A(!1),e.seamless!==!0&&(M(!1),ve(F),oe(S))),l!==!0&&(v=null)}function A(l){l===!0?f!==!0&&(ee<1&&document.body.classList.add("q-body--dialog"),ee++,f=!0):f===!0&&(ee<2&&document.body.classList.remove("q-body--dialog"),ee--,f=!1)}function X(l){h!==!0&&(B(l),o("click",l))}function Y(l){e.persistent!==!0&&e.noBackdropDismiss!==!0?B(l):e.noShake!==!0&&P()}function F(l){e.allowFocusOutside!==!0&&le.value===!0&&Oe(u.value,l.target)!==!0&&b('[tabindex]:not([tabindex="-1"])')}Object.assign(a.proxy,{focus:b,shake:P,__updateRefocusTarget(l){v=l||null}}),he(Q);function U(){return E("div",{role:"dialog","aria-modal":_.value===!0?"true":"false",...i,class:J.value},[E(fe,{name:"q-transition--fade",appear:!0},()=>_.value===!0?E("div",{class:"q-dialog__backdrop fixed-full",style:ie.value,"aria-hidden":"true",tabindex:-1,onClick:Y}):null),E(fe,W.value,()=>s.value===!0?E("div",{ref:u,class:G.value,style:I.value,tabindex:-1,...R.value},_e(t.default)):null)])}return p}});class Mt{static formatKeyName(t){if(t.includes("Key"))return t.split("Key")[1];if(t.includes("Digit"))return t.split("Digit")[1];if(t.includes("Numpad"))return t.split("Numpad")[1];const o={ArrowUp:"\u2191",ArrowDown:"\u2193",ArrowLeft:"\u2190",ArrowRight:"\u2192"};if(t in o)return o[t];const i={ShiftLeft:"Left Shift",ShiftRight:"Right Shift",ControlLeft:"Left Control",ControlRight:"Right Control",AltLeft:"Left Alt",AltRight:"Right Alt"};return t in i?i[t]:t}static getSpecialKeyIndicator(t){if(t.includes("Control")||t.includes("Alt"))return{icon:"priority_high",message:"This key may have unintended side effects."};if(t.includes("Numpad"))return{icon:"dialpad",message:"This key is on the number pad."};if(t.includes("Gamepad"))return{icon:"gamepad",message:"This button is on a gamepad."}}static keycodeAlreadyBound(t){return Boolean(Object.entries(me.controls.keyboard).find(o=>Object.entries(o[1]).find(i=>i[1].keycode===t)))}static rebindControl(t,o){if(!(!t||!o)&&!(o===""||o==="Escape"||o==="NumLock"||o.includes("Meta")||/^F[0-9]{1,2}$/iu.test(o))){if(this.keycodeAlreadyBound(o)&&t.keycode!==o){Ye.create({type:"negative",textColor:"white",icon:"warning",message:`"${this.formatKeyName(o)}" is already in use.`});return}t.keycode=o}}static rebindControlByName(t,o,i){var u,s;if(!t||!o||!i)return;const a=(s=(u=me.controls.keyboard)==null?void 0:u[t])==null?void 0:s[o];!a||this.rebindControl(a,i)}}const Ot=Ue({name:"JitsiContainer",props:{propsToPass:{type:Object,default:()=>({})}},setup(){return{applicationStore:Ze,userStore:me}},methods:{styleIframe(e){e.style.width="100%",e.style.height="100%";const t=e.querySelector("iframe");t&&(t.style.width="100%",t.style.height="100%")},setupWebEntity(e,t){const o=et.getGameObjectByID(e.entity.id),i=o==null?void 0:o.getComponent(ye.typeName);i instanceof ye&&(i.externalElement=t)}}});function Rt(e,t,o,i,a,u){const s=tt("JitsiOverlay");return re(),ot(St,{id:"jitsi-container",class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none",display:"none"}},{default:nt(()=>[(re(!0),we(lt,null,it(e.applicationStore.conference.activeRooms,c=>(re(),we("div",{key:c.name},[st(s,{domain:e.applicationStore.metaverse.jitsiServer,"room-name":c.id,"user-info":{displayName:e.userStore.avatar.displayName},onGetIframeRefOnApiReady:d=>{d.id=c.id,e.styleIframe(d),e.setupWebEntity(c,d)}},null,8,["domain","room-name","user-info","onGetIframeRefOnApiReady"])]))),128))]),_:1})}var $t=xt(Ot,[["render",Rt],["__scopeId","data-v-3493e862"]]);export{$t as J,Mt as K,Dt as Q,Kt as a};
